# FET Demo SOP

## 一. 部署环境介绍
![Alt text](https://github.com/breezescut/zbin/blob/master/IOT%20Project/Photo/FET_Demo_%E9%83%A8%E7%BD%B21.png?raw=true)

## 二. 演示前准备工作

### 2.1 裝置清點


### 2.2 裝置通电接网

a. 智能家居裝置通電流程:
- 中控, 直接通電
- 彩燈, 直接通電
- 推窗器(含推窗控制器), 直接通電
- 風扇, 風扇接智能插座, 通過智能插座控制風扇開關
- 窗簾機, 窗簾機需要接變壓器, 首先用轉接線連接插板和變壓器110V接口, 窗簾機再接變壓器220V接口, 窗簾機不要直接接110V電源, 以免出現意外
- 傳感類設備分帶電池和無電池兩種, 帶電池類無須通電, 直接可用, 不帶電池的先通電后使用

b. 通信裝置(MIFI)配置:
- 白色 ZTE MIFI(內網連接), 電腦連接WIFI熱點(MF970_973343/eiota98f), 連接成功后網頁登陸 192.168.0.1, 密碼:admin. 登陸后手動打開LTE連線, 打開后如果還是連接不上請 Jeff 打開基地台后重試.
- 智能中控, 電腦連接 A98F/eiota98f, 連接后登陸192.168.188.1(admin/iot98f). 登陸后再"Network setting->WAN port setting"中下拉選擇"Wireless repeater", 選擇后啟動"search", search 結果中選擇 MF970_973343(或需要輸入Key,即 MF970_973343 的熱點Password).設置完成后, 智能中控即可以直連到內網的EHUB服務器
- 黑色華為7(HUAWEI-6454), 這個是外網連接Mifi, 密碼(94700072), 需要連接外網的裝置需要通過這個MIFI出外.

c. Robot 檢查工作
- 事先給 Robot 進行充電, 以免電量不足, Robot 電量不足時會自動講話提醒充電, 並且無法對動作指令做出響應(可說話, 但動不了)
- Robot(舊版) 機器啟動后先啟動 Myrobot App(通過點擊主頁), 啟動過程如提示更新, 選擇放棄, 啟動后再點擊主頁, 彈出框中選擇XiaoAi App 啟動.啟動MyRoot的主要原因是因為Robot 的動作服務由該APP負責開啟, 新版 Xiaoai App 支持動作服務, 無須開啟 MyRobot.

d. 裝置接網設置:
- 語音棒直接進行wifi設置, 選擇HUAWEI-6454連接外網
- 主人手機 WIFI 設置, 選擇HUAWEI-6454連接外網
- 黃醫生 IPad WIFI 設置, 選擇HUAWEI-6454連接外網

### 2.3 裝置調試
裝置通電接網后就可以進入裝置調試操作, 步驟如下:
- 打開主人手機上的愛家APP, 控制彩燈開關, 窗簾開關, 如果裝置操控后無反應, 請稍後再操作,因為裝置通電后要重新組網, 稍後操作如還沒有反應, 反饋到技術人員檢查中控是否有上線.
- 打開主人手機上的愛家APP, 控制推窗器, 如果推窗器無反應, 則有可能是使用了舊版的愛家APP導致, 可先用手按觸推窗控制器確認推窗器是否正常, 按觸時間要持續5秒才會有反應.
- 打開主人手機上的愛家APP, 點擊進入小愛裝置頁, 會直接鏈接到小愛攝像頭, 通過該頁面還可以操控小愛動作(如前進/後退/頭轉向/身轉向等)
- 打開語音棒上的語音APP, APP 直接進入"開始喚醒"狀態, 如沒有進入"開始喚醒"狀態, 則代表網絡連接有問題, 請先檢查語音棒聯網狀態. 語音棒進入"開始喚醒"狀態后就可以通過喊"小愛小愛"將語音棒喚醒, 喚醒后喊"向前走", 小愛會向前走并說話.

### 2.4 系統調試工作
通過 SSH 鏈接到 FET-EHUB(123.51.128.81) 服務器, 進入"/home/ericadm"目錄, 本目錄下有兩個 文件, test.pl 和 test_config.pl, 其中 test_config.pl 配置有各個指令(含裝置觸發和語音指令), 各指令配備序號.

在終端中輸入"perl test.pl" 啟動腳本后, 按需要輸入各指令編號來執行相應指令(不用順序輸入, 但如果長時間不輸入有可能被服務器中斷鏈接, 需要重啟腳本).

如需要修改指令內容, 直接打開 test_config.pl 修改即可. 

### 2.5 其他工作
演示前還需要執行以下工作:
- 演示開始前關閉語音棒, 將語音棒APP退出, 不要只是"停止喚醒".
- 演示前將 AI 設置為不調用狀態

## 三. 演示中工作
主持人說話過程中, 後台助手就要發送相應指令到平台, 不要等待主持人完成說話, 否則可能有明顯延遲.


## 四. 故障應對

### 4.1 FET Cloud 故障

